__NUXT_JSONP__("/tutoriales/salidas-analogicas-con-arduino", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.cdate="2018-01-26 15:57:33";b.mdate="2019-07-09 14:05:12";c[0]="migueabellan";return {data:[{tutorial:{alias:"salidas-analogicas-con-arduino",title:a,description:h,image:"img\u002Fpreview.jpg",contributors:c,tags:{technology:[d,e],hardware:[f],software:[g,n],level:[i,j],others:[k,l]},extra:{level:"Iniciación",duration:"120 minutos",videos:m},date:b},title:a,description:h,image:"https:\u002F\u002Fraw.githubusercontent.com\u002FProgramoErgoSum\u002FTutoriales\u002Fmaster\u002Fv1\u002Fsalidas-analogicas-con-arduino\u002Fimg\u002Fpreview.jpg",date:b,tags:[d,e,f,g,n,i,j,k,l],editLink:"https:\u002F\u002Fgithub.com\u002FProgramoErgoSum\u002FTutoriales\u002Fedit\u002Fmaster\u002Fv1\u002Fsalidas-analogicas-con-arduino\u002FREADME.md",contributors:c,raw:"## Introducción\n\nEn este tutorial aprenderás a programar diferentes prácticas utilizando las salidas analógicas de la placa de arduino. Para cada una se explica la parte de electrónica que deberás conocer antes de programarlas. Observarás además que puedes programarlas utilizando los lenguajes de programación por bloques o textual de Arduino.\n\n- Práctica 1: Luces aleatorias\n- Práctica 2: LED RGB de ánodo común\n- Práctica 3: Servomotor 0-180\n- Práctica 4: La Guerra de las Galaxias\n\n### Materiales\n\nAntes de continuar con las lecciones del curso asegúrate que dispones de todos los componentes que se van a necesitar. Los componentes utilizados en este tutorial son:\n\n- Arduino UNO\n- Protoboard\n- Latiguillos\n- LEDs\n- RGB\n- Resistencias\n- Servomotor\n- Zumbador\n\n\n\n\u003Cbr \u002F\u003E\n\n\n\n## Salidas analógicas PWM\n\nUna señal analógica es aquella que puede tomar diferentes valores. Su forma característica es conocida como señal de onda senoidal y las representaciones se realizan en el dominio del tiempo. La función principal de las salidas analógicas es entregar una señal de control que le dará funcionalidad a un circuito electrónico que será el encargado de cumplir con las funciones que el usuario requiera.\n\n![](img\u002Fsenal-analogica.jpg)\n\n### Salidas digitales en Arduino\n\nEn electrónica se suele utilizar un convertidor de digital a analógico (DAC) para transformar la señal digital en analógica, sin embargo arduino no incluye un DAC dentro de los circuitos que forman la placa, con lo cual no son capaces de producir salidas analógicas. Sin embargo son capaces de producir una señal analógica modulada por pulso PWM.\n\n\u003E En Arduino UNO no tenemos una señal analógica pura, es decir, se utiliza la técnica PWM.\n\nPWM (modulación por ancho o de pulso) es un tipo de señal de voltaje utilizada para enviar información o para modificar la cantidad de energía que se envía a una carga. Este tipo de señales es muy utilizada en circuitos digitales que necesitan emular una señal analógica, en las cuales se les cambia el ancho relativo respecto al período de la misma, el resultado de este cambio es llamado ciclo de trabajo y sus unidades están representadas en términos de porcentaje.\n\n![](img\u002Fsenal-pwm.jpg)\n\nEn arduino disponemos de 6 pines analógicos PWM serigrafiados con el símbolo de alterna (~) con los números 11, 10, 9, 6, 5, 3.\n\n\u003E La salida analógica PWM toma los valores comprendidos entre 0 y 255.\n\n![](img\u002Fsalidas-analogicas.jpg)\n\nLos pines de salida han sido diseñados para entregar señales de voltaje, no para suplir corriente a un circuito. El máximo de corriente que puede entregar un pin de salida es de aproximadamente 40mA (suficiente para encender un LED). Las cargas que vamos a manejar no deben superar los 5V ni consumir más de 40mA.\n\n### Bloques de programación\n\nPara programar las siguientes prácticas utilizando el lenguaje de programación por bloques de mBlock, deberás conocer los siguientes bloques de programación, encargados de regular los pines analógicos PWM de la placa de arduino.\n\nEl primer bloque activa el pin analógico PWM número 5 de la placa de arduino a un valor de 0, con lo cual si conectamos un LED correctamente se apagará. Por otro lado, si cambiamos el valor por 150 observaremos que el LED se ilumina con una intensidad media.\n\nTambién disponemos de un bloque encargado de hacer girar un servomotor entre 0º y 180º y otro bloque para reproducir frecuencias en el zumbador.\n\n\u003E Los pines para las salidas analógicas PWM corresponden a los pines 11, 10, 9, 6, 5 y 3 y pueden tomar valores comprendidos entre 0 y 255, o entre 0 y 180 para el caso de los servomotores.\n\n![](img\u002Fsalidas-analogicas-mblock.jpg)\n\n### Instrucciones de programación\n\nPara programar las siguientes prácticas utilizando el lenguaje de programación textual de Arduino IDE, deberás conocer las siguientes instrucciones de programación.\n\n**Función pinMode()**\n\nLa función pinMode(), utilizada en la función setup(), sirve para configurar el modo de trabajo de un pin pudiendo ser INPUT (entrada) u OUTPUT (salida).\n\n```arduino\n\u002F\u002F Configura \"pin\" como salida\npinMode(pin, OUTPUT);\n\n\u002F\u002F Ejemplo: Activar el pin digital 13 como salida\npinMode(13, OUTPUT);\n```\n \n**Función analogWrite()**\n\nLa función analogWrite(), utilizada normalmente en la función loop(), sirve para escribir un valor a un pin PWM. Los valores posibles están comprendidos entre 0 y 255. Recuerda que en arduino disponemos de los pines 11, 10, 9, 6, 5, 3 para utilizar como salidas PWM.\n\n```arduino\n\u002F\u002F Establece en \"pin\" el valor 150\nanalogWrite(pin, 150);\n\n\u002F\u002F Ejemplo: Activar el pin digital 11 con valor 255\nanalogWrite(11, 255);\n```\n\n**Función random()**\n\nLa función random() sirve para elegir un valor aleatorio entre dos valores dados.\n\n```arduino\n\u002F\u002F Elige un valor entre un mínimo y un máximo\nrandom(mínimo, máximo);\n\n\u002F\u002F Ejemplo: Elige un valor entre 0 y 255\nrandom(0, 255);\n```\n\n### Estructura de un programa en Arduino IDE\n\nTodo programa para Arduino consta de 2 funciones; la función setup() y la función loop(). La función setup() es la primera función que se ejecuta en nuestro programa, ejecutándose sólo una vez, y se utiliza para configurar la comunicación con nuestro equipo, inicializar los pines de nuestra tarjeta de Arduino e inicialización de las variables.\n\n```arduino\n\u002F\u002F La función setup() es la primera función en ejecutarse, una sola vez\nvoid setup(){\n  Instrucción 1\n  Instrucción 2\n  ...\n  Instrucción N\n}\n```\n\nLa función loop() se ejecuta repetidamente después de la función setup(). Dentro de la misma vamos a introducir el programa que queremos ejecutar dentro de la placa de Arduino.\n\n```arduino\n\u002F\u002F La función loop() se ejecuta repetidamente en modo bucle infinito\nvoid loop(){\n  Instrucción 1\n  Instrucción 2\n  ...\n  Instrucción N\n}\n```\n\n### Sintaxis de programación en Arduino IDE\n\nEs importante tener claras las siguientes reglas del lenguaje de programación:\n\n- Toda línea termina en punto y coma \";\" excepto las estructuras de control que se acompañan con llaves \"{}\".\n- Las instrucciones y variables son sensibles a mayúsculas y minúsculas, es decir, debemos respetar el nombre exacto.\n- Las instrucciones que comienzan por el símbolo de doble barra \"\u002F\u002F\" se tomará como comentario para el programa. También se dispone de comentarios de múltiples líneas \u002F* *\u002F.\n\n\n\n\u003Cbr \u002F\u003E\n\n\n\n## Práctica 1: Luces aleatorias\n\nEl objetivo de esta práctica es encender en diferentes intensidades 3 LEDs blancos, es decir, se va a programar un código encargado de encender cada LED blanco a una intensidad de luz diferente (haciendo uso de la salida analógica).\n\n![](img\u002Fluces-aleatorias.gif)\n\n### Materiales\n\n- 1 Arduino UNO\n- 1 Protoboard\n- 4 Latiguillos\n- 3 LEDs blancos\n- 3 Resistencias de 100Ω (marrón-negro-marrón)\n\n### Esquema eléctrico\n\nSe conectan los LEDs a los pines analógicos PWM (~) 9, 6 y 5. La patilla larga del LED debe ser conectada al voltaje positivo (ánodo) y la corta al voltaje negativo (cátodo) pasando por la resistencia.\n\n```\nV = 5V - 3.3V = 1.7V\nI = 20mA\n\nV = I x R ; R = V \u002F I\n\nR = 1.7V \u002F 0.02A = 85Ω -\u003E 100Ω (por aproximación)\n```\n\n![](img\u002Fluces-aleatorias-esquema.jpg)\n\n### Programación en mBlock\n\nAl ejecutar el código se establecerá un valor aleatorio entre 0 y 255 en cada uno de los pines analógicos PWM. Además esperaremos medio segundo para poder visualizar el efecto.\n\n![](img\u002Fluces-aleatorias-mblock.jpg)\n\n### Programación en Arduino IDE\n\nEn primer lugar, se configura los pines analógicos PWM 9, 6 y 5 en modo salida (OUTPUT). Esta configuración se establece en la función setup(), ya que solamente se ejecuta una vez.\n\nPor otro lado, al ejecutar el código se establecerá un valor aleatorio entre 0 y 255 en cada uno de los pines analógicos PWM y esperaremos medio segundo (500 milisegundos) para visualizar el efecto aleatorio.\n\n```arduino\nvoid setup() {\n  pinMode(9, OUTPUT);\n  pinMode(6, OUTPUT);\n  pinMode(5, OUTPUT);\n}\n\nvoid loop() {\n  analogWrite(9, random(0, 255));\n  analogWrite(6, random(0, 255));\n  analogWrite(5, random(0, 255));\n  delay(500);\n}\n```\n\n\n\n\u003Cbr \u002F\u003E\n\n\n\n## Práctica 2: LED RGB (ánodo común)\n\nEl objetivo de esta práctica consiste en encender un LED RGB de ánodo común en sus 3 colores básicos rojo, verde y azul. Aunque esta práctica se podría realizar utilizando salidas digitales, se va a realizar utilizando salidas analógicas con valores de 255.\n\n![](img\u002Fled-rgb.gif)\n\n### Materiales\n\n- 1 Arduino UNO\n- 1 Protoboard\n- 4 Latiguillos\n- 1 LED RGB de ánodo común\n- 1 Resistencias de 100Ω (marrón-negro-marrón)\n- 2 Resistencias de 220Ω (rojo-rojo-marrón)\n\n### Esquema eléctrico\n\nLa patilla más larga del LED RGB de ánodo común se conecta al pin de 5V de la placa de arduino para que esté polarizado positivamente. La patilla que queda a la izquierda corresponde al color rojo, el cual se conectará con su debida resistencia. Las otras dos patillas corresponden a los colores verde y azul por orden. También habrá que conectarlas a sus resistencias que además son de menor valor.\n\n**Cálculo de la resistencia para el LED RGB (rojo)**\n\n```\nV = 5V - 2.1V = 2.9V\nI = 20mA\n\nV = I x R ; R = V \u002F I\n\nR = 2.9V \u002F 0.02A = 145Ω -\u003E 220Ω (por aproximación)\n```\n\n**Cálculo de la resistencia para el LED RGB (verde - azul)**\n\n```\nV = 5V - 3.3V = 1.7V\nI = 20mA\n\nV = I x R ; R = V \u002F I\n\nR = 1.7V \u002F 0.02A = 85Ω -\u003E 100Ω (por aproximación)\n```\n\n![](img\u002Fled-rgb-anodo-esquema.jpg)\n\n### Programación en mBlock\n\nAl ejecutar el código se activará cada uno de los pines encargados de encender el LED RGB. En este caso, al estar utilizando un LED RGB de ánodo común para encender el color rojo tendremos que polarizar inversamente el color que queremos visualizar, dicho de otro modo, tendremos que establecer a un valor bajo el pin conectado a la patilla del color rojo y un valor alto a las patillas del color verde y azul.\n\n![](img\u002Fled-rgb-anodo-mblock.jpg)\n\n### Programación en Arduino IDE\n\nEn primer lugar, se configura los pines analógicos PWM 9, 6 y 5 en modo salida (OUTPUT). Esta configuración se establece en la función setup(), ya que solamente se ejecuta una vez.\n\nPor otro lado, al ejecutar el código se activará cada uno de los pines encargados de encender el LED RGB. En este caso, al estar utilizando un LED RGB de ánodo común para encender el color rojo tendremos que polarizar inversamente el color que queremos visualizar, dicho de otro modo, tendremos que establecer a un valor bajo el pin conectado a la patilla del color rojo y un valor alto a las patillas del color verde y azul. Además se crea un retardo de 1 segundo (1000 milisegundos) para apreciar el efecto de cambio de color.\n\n```arduino\nvoid setup() {\n  pinMode(9, OUTPUT);\n  pinMode(6, OUTPUT);\n  pinMode(5, OUTPUT);\n}\n\nvoid loop() {\n  analogWrite(9, 0);\n  analogWrite(6, 255);\n  analogWrite(5, 255);\n  delay(1000);\n  analogWrite(9, 255);\n  analogWrite(6, 0);\n  analogWrite(5, 255);\n  delay(1000);\n  analogWrite(9, 255);\n  analogWrite(6, 255);\n  analogWrite(5, 0);\n  delay(1000);\n}\n```\n\n\n\n\u003Cbr \u002F\u003E\n\n\n\n## Práctica 3: Servomotor 0º-180º\n\nEl objetivo de esta práctica consiste en mover un servomotor desde su posición o ángulo de 0º hasta 180º y vuelta a empezar, de forma repetida. Además, se desplazará de 10º en 10º.\n\n![](img\u002Fservomotor.gif)\n\n### Materiales\n\n- 1 Arduino UNO\n- 3 Latiguillos\n- 1 Servomotor\n\n### Esquema eléctrico\n\nConectamos el cable rojo (positivo del servomotor) al pin 5V de la placa de arduino, el cable negro (negativo del servomotor) al pin GND de la placa de arduino y el color amarillo al pin analógico PWM 9 de la placa de arduino.\n\n![](img\u002Fservomotor-esquema.jpg)\n\n### Programación en mBlock\n\nAl ejecutar el código se crea una variable encargada de almacenar el ángulo del servomotor, que por defecto empezará en su posición de 0º. A continuación se repite 18 veces el cambio de ángulo por 10º esperando una décima de segundo. De esta forma el servomotor se desplazará hasta la posición 180º. Y como tiene que regresar se vuelve a crear un bucle pero en este caso la variable irá decrementando de 10º en 10º.\n\n![](img\u002Fservomotor-mblock.jpg)\n\n### Programación en Arduino IDE\n\nEn primer lugar, se importa la librería a utilizar \u003CServo.h\u003E y se inicializa el objeto llamado servomotor. Además se configura el pin analógico PWM 9 a utilizar por el servomotor. Esta configuración se establece en la función setup(), ya que solamente se ejecuta una vez.\n\nPor otro lado, al ejecutar el código se recorre 18 veces el cambio de ángulo por 10º esperando una décima de segundo. De esta forma el servomotor se desplazará hasta la posición 180º. Y como tiene que regresar se vuelve a crear un bucle pero en este caso la variable irá decrementando de 10º en 10º.\n\n```arduino\n#include \u003CServo.h\u003E \n\nServo servomotor;\n\nvoid setup() {\n  servomotor.attach(9);\n}\n\nvoid loop() {\n  for(int i=0; i\u003C=180; i+=10){\n    servomotor.write(i);\n    delay(100);\n  }\n  for(int i=180; i\u003E=0; i-=10){\n    servomotor.write(i);\n    delay(100);\n  }\n}\n```\n\n\n\n\u003Cbr \u002F\u003E\n\n\n\n## Práctica 4: La Guerra de las Galaxias\n\nEl objetivo de esta práctica consiste en reproducir con ayuda de un zumbador la banda sonora de La Guerra de las Galaxias mediante frecuencias.\n\n![](img\u002Fbso.gif)\n\n### Materiales\n\n- 1 Arduino UNO\n- 1 Protoboard\n- 2 Latiguillos\n- 1 Zumbador\n\n### Esquema eléctrico\n\nSe conecta el cable negro (negativo) del zumbador al pin GND de la placa de arduino y el cable rojo (positivo) al pin analógico PWM 9 de la placa de arduino.\n\n![](img\u002Fbso-esquema.jpg)\n\n### Programación en mBlock\n\nAl ejecutar el código utilizamos los bloques de sonido siguiendo la partitura de la banda sonora de La Guerra de las Galaxias.\n\n![](img\u002Fbso-mblock.jpg)\n\n### Programación en Arduino IDE\n\nEn primer lugar se crea una lista con las notas y tonos de cada una de las notas. También se va a utilizar una función encargada deemitir una frecuencia pasada por parámetro durante una determinada duración, también pasada por parámetro.\n\nPor otro lado, al ejecutar el código se llama a la función que reproduce la nota dada siguiendo la partitura de la banda sonora de La Guerra de las Galaxias.\n\n```arduino\nint c[5]={131,262,523,1046,2093}; \u002F\u002F Do\nint d[5]={147,294,587,1175,2349}; \u002F\u002F Re\nint e[5]={165,330,659,1319,2637}; \u002F\u002F Mi\nint f[5]={175,349,698,1397,2794}; \u002F\u002F Fa\nint g[5]={196,392,784,1568,3136}; \u002F\u002F Sol\nint a[5]={220,440,880,1760,3520}; \u002F\u002F La\nint b[5]={247,494,988,1976,3951}; \u002F\u002F Si\n\nvoid nota(int frecuencia, int duracion)\n{\n  tone(9, frecuencia);\n  delay(duracion);\n  noTone(9);\n  delay(50);\n}\n\nvoid setup() {\n\n}\n\nvoid loop() {\n  nota(f[2],500);\n  nota(f[2],500);\n  nota(f[2],500);\n  nota(d[2],250);\n  nota(a[2],250);\n  nota(f[2],500);\n  nota(d[2],250);\n  nota(a[2],250);\n  nota(f[2],500);\n  delay(500);\n  nota(c[3],500);\n  nota(c[3],500);\n  nota(c[3],500);\n  nota(d[3],250);\n  nota(a[2],250);\n  nota(f[2],500);\n  nota(d[2],250);\n  nota(a[2],250);\n  nota(f[2],500);\n  delay(1000);\n}\n```\n",cdn:"https:\u002F\u002Fraw.githubusercontent.com\u002FProgramoErgoSum\u002FTutoriales\u002Fmaster\u002Fv1\u002Fsalidas-analogicas-con-arduino\u002F",breadcrumbs:[{text:"Tutoriales",disabled:false,to:"\u002Ftutoriales"},{text:a,disabled:true,to:m}]}],fetch:[],mutations:[]}}("Salidas analógicas con Arduino",{},Array(1),"Electrónica","Programación","Arduino","Arduino IDE","Programación y electrónica de sensores básicos utilizando salidas analógicas PWM con Arduino.","Secundaria","Bachillerato","Salidas","Analógicas","","mBlock")));