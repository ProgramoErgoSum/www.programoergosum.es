__NUXT_JSONP__("/tutoriales/conectando-arduino-con-pyserial", (function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.cdate="2019-04-01 00:00:00";b.mdate="2019-10-26 14:05:12";c[0]="migueabellan";return {data:[{tutorial:{alias:"conectando-arduino-con-pyserial",title:a,description:g,image:"img\u002Fpreview.jpg",contributors:c,tags:{technology:[d,e],hardware:[f],software:[m,h],level:[i,j],others:[k]},extra:{level:"Medio",duration:"45 minutos",videos:l},date:b},title:a,description:g,image:"https:\u002F\u002Fraw.githubusercontent.com\u002FProgramoErgoSum\u002FTutoriales\u002Fmaster\u002Fv1\u002Fconectando-arduino-con-pyserial\u002Fimg\u002Fpreview.jpg",date:b,tags:[d,e,f,m,h,i,j,k],editLink:"https:\u002F\u002Fgithub.com\u002FProgramoErgoSum\u002FTutoriales\u002Fedit\u002Fmaster\u002Fv1\u002Fconectando-arduino-con-pyserial\u002FREADME.md",contributors:c,raw:"## Introducción\n\nEn este tutorial vamos a conectar Raspberry Pi con Arduino para controlar diferentes sensores y actuadores haciendo que se comuniquen entre ellos a través del puerto serie.\n\n### Antes de empezar\n\nVas a necesitar los siguientes componentes:\n\n- Raspberry Pi con Raspbian\n- Arduino UNO\n\nEs recomendable acceder a los siguientes tutoriales:\n\n- Instalar Arduino IDE en Raspbian\n\n\n\n\u003Cbr \u002F\u003E\n\n\n\n## Raspberry Pi vs Arduino\n\nMediante Raspberry Pi podemos controlar diferentes pines GPIO para entradas y salidas, sin embargo este número de pines es limitado. Además, nos encontramos con que los tiempos de respuestas son demasiado lentos cuando programamos con lenguajes como Python. Con Arduino no nos encontramos con estas limitaciones.\n\nEn este tutorial vamos a combinar las ventajas que ofrece Raspberry Pi en cuanto a sistema operativo como controlador maestro, y las ventajas que ofrece Arduino para controlar diferentes sensores y actuadores como esclavo, haciendo que se comuniquen entre ellos a través del puerto serie.\n\n\n\n\u003Cbr \u002F\u003E\n\n\n\n## Instalar Python Serial\n\nComo hemos comentado, vamos a utilizar las ventajas de ambas plataformas para conectarlas juntas a través del puerto serie. Por ello, vamos a necesitar instalar la librería *python-serial* con el comando `apt install python-serial` la cual nos permitirá utilizar el puerto serie desde Python para comunicarnos con Arduino. \n\n```sh\npi@raspberrypi:~ $ sudo apt install python-serial\n```\n\n\n\n\u003Cbr \u002F\u003E\n\n\n\n## Enviar datos desde Raspberry Pi hacia Arduino\n\nEn primer lugar vamos a programar el código encargado de enviar comandos a través del serial. Estos comandos van a encender y apagar el LED 13 de una placa de Arduino. Lo vamos a programar en Python utilizando cualquier editor, por ejemplo, Thonny Editor.\n\n```\nCon el comando 'E' se encenderá el LED 13\nCon el comando 'A' se apagará el LED 13\n```\n\n### Maestro: Enviar datos hacia el serial\n\nEn primer lugar se importa la librería previamente instalada. A continuación se crea el objeto *Serial* estableciendo el puerto y la velocidad de transmisión. En nuestro caso tenemos un Arduino UNO conectado al puerto `\u002Fdev\u002FttyACM0` el cual se comunica a 9600 baudios. \n\nA continuación, en bucle vamos a solicitar al usuario que introduzca el comando a través del teclado, se almacenará en una variable, y a continuación se enviará a través del serial. Es importante añadir la función `encode()` a la cadena enviada\n\n```python\nimport serial\n\narduino = serial.Serial('\u002Fdev\u002FttyACM0', 9600)\n\nwhile True:\n   comando = input('Introduce un comando: ')\n\n   arduino.write(comando.encode())\n```\n\n![](img\u002Fmaestro.jpg \"Maestro\")\n\n### Esclavo: Recibir datos desde el serial\n\nDesde Arduino, establecemos la velocidad de transmisión a 9600 baudios como ya hicimos en Python. En el interior del bucle `loop()` estaremos escuchando el serial hasta que encontremos nueva información, en cuyo caso solamente comprobaremos si la información añadida al serial es una 'E' para encender el pin 13 o una 'A' para apagarlo.\n\n```arduino\nint led = 13;\n\nvoid setup () {\n  Serial.begin(9600);\n  \n  pinMode(led, OUTPUT);\n}\n\nvoid loop () {\n  if (Serial.available()) {\n    \n    char c = Serial.read();\n    \n    if (c == 'E') {\n      digitalWrite(led, HIGH);\n    }\n    if (c == 'A') {\n      digitalWrite(led, LOW);\n    }\n  }\n}\n```\n\n![](img\u002Fesclavo.jpg \"Esclavo\")\n\n\n\n\u003Cbr \u002F\u003E\n\n\n\n## Enviar datos desde Arduino hacia Raspberry Pi\n\nDe forma similar, podemos enviar datos desde arduino. Por ejemplo, supongamos que tenemos un sensor de temperatura que queremos controlar para enviar la información a la Raspberry Pi.\n\n\n### Esclavo: Enviar datos hacia el serial\n\nEn este ejemplo, vamos enviar el mensaje \"Hola Mundo\" desde la placa de Arduino hacia el serial.\n\n```arduino\nvoid setup () {\n  Serial.begin(9600);\n}\n\nvoid loop () {\n  String cadena = \"Hola Mundo\";\n  Serial.println(cadena);\n  delay(1000);\n}\n```\n\n### Maestro: Recibir datos desde el serial\n\nDe forma similar, el maestro estará leyendo del serial y mostrará el contenido por la pantalla. Hemos añadido la librería `time` para esperar unos segundos entre lectura y lectura. Además, fíjate como si en el caso anterior, teníamos que codificar la cadena, en este caso tenemos que decodificarla utilizando la función `decode()`.\n\n```python\nimport serial, time\n\narduino = serial.Serial('\u002Fdev\u002FttyACM0', 9600)\n\nwhile True:\n  cadena = arduino.readline()\n  \n  if(cadena.decode() != ''):\n    print(cadena.decode())\n  \n  time.sleep(1)\n\narduino.close()\n```\n\n![](img\u002Farduino-raspberry-pi.jpg \"Arduino y Raspberry Pi\")\n\n\n\n\u003Cbr \u002F\u003E\n\n\n\n## Ejercicios propuestos\n\n1.- Envía datos desde la Raspberry Pi hacia Arduino para encender o apagar diferentes LEDs.\n\n2.- Envía datos desde el Arduino hacia Raspberry Pi para mostrar el valor de un sensor LDR u otro sensor analógico.\n\n3.- Envía el valor de diferentes sensores analógicos y muestra los valores en la Raspberry Pi.\n\n4.- Guardar diferentes datos de sensores en un csv en Raspberry Pi controlados por un Arduino.\n",cdn:"https:\u002F\u002Fraw.githubusercontent.com\u002FProgramoErgoSum\u002FTutoriales\u002Fmaster\u002Fv1\u002Fconectando-arduino-con-pyserial\u002F",breadcrumbs:[{text:"Tutoriales",disabled:false,to:"\u002Ftutoriales"},{text:a,disabled:true,to:l}]}],fetch:[],mutations:[]}}("Conectando Raspberry Pi y Arduino con PySerial",{},Array(1),"Electrónica","Programación","Raspberry Pi","Enviando datos desde Raspberry Pi a Arduino a través del Serial.","Arduino IDE","Secundaria","Bachillerato","Raspbian","","Python")));